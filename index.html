<!DOCTYPE html>
<html lang="en-EN">
<head>
	<title>Field Data Collector</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<link rel="stylesheet" href="./css/style.css" type="text/css" media="all" />
	<script type="text/javascript" src="./js/vue.js"></script>
</head>
<body>
	<div id="main">
		<div class="page" v-show="page == 'menu'">
			<h1>Field Data Collector</h1>
			
			<div class="bottom">
				<div class="button" v-on:click="page = 'categories'">Categories</div>
				<div class="button" v-on:click="page = 'models'">Data models</div>
			</div>
		</div>

		<!-- CATEGORIES -->
		<div class="page" v-show="page == 'categories'">
			<div class="back" v-on:click="page = 'menu'"><</div>
			<h1>Categories</h1>
			<div class="action button" v-on:click="page = 'newCategory'">+ Add new category</div>
			<hr/>
			<div class="row" v-for="(category, catidx) in categories">
				<div class="floatRight">
					<div v-show="!category.confirmDelete" class="icon action button" v-on:click="deleteCategory(category)">❌</div>
					<div v-show="category.confirmDelete">Delete?
						<div class="icon action button" v-on:click="deleteCategoryConfirm(catidx)">Yes</div>
						<div class="icon button" v-on:click="category.confirmDelete = false">No</div>
					</div>
				</div>
				<div class="button" v-on:click="editCategory(catidx)">{{category.name}}</div>
			</div>
		</div>
		<div class="page" v-show="page == 'category'" v-if="editingCategory != null">
			<div class="back" v-on:click="page = 'categories'"><</div>
			<h1>Category: {{categories[editingCategory].name}}</h1>
			<div class="input">
				<label>Category name:</label>
				<input type="text" placeholder="Category1" v-model="categories[editingCategory].name" />
			</div>
			<h3>Items ({{categories[editingCategory].items.length}})</h3>
			<div class="row" v-for="(item, itemidx) in categories[editingCategory].items">
				<div v-show="!item.editing">
					<div class="floatRight">
						<div class="icon action button" v-on:click="removeItem(itemidx)">❌</div>
						<div class="icon action button" v-on:click="editItem(item)">✏️</div>
					</div>
					<div class="label">
						{{item.name}}
					</div>
				</div>
				<div class="segment" v-show="item.editing">
					<div class="input">
						<label>Item name:</label>
						<input type="text" v-on:keyup.enter="item.editing = false" placeholder="Item1" v-model="item.name" />
					</div>
					<div class="button" v-on:click="item.editing = false">Save item</div>
				</div>
			</div>
			<div class="button" v-on:click="addItem">Add new item</div>
		</div>
		<div class="page" v-show="page == 'newCategory'">
			<div class="back" v-on:click="page = 'categories'"><</div>
			<h1>New category</h1>
			<div class="input">
				<label>Category name:</label>
				<input type="text" placeholder="Category1" v-on:keyup.enter="saveNewCategory" v-model="newCategoryName" />
			</div>
			<div class="action button" v-on:click="saveNewCategory">Save category</div>
		</div>

		<!-- MODELS -->
		<div class="page" v-show="page == 'models'">
			<div class="back" v-on:click="page = 'menu'"><</div>
			<h1>Data models</h1>
			<div class="action button" v-on:click="page = 'newModel'">+ Add new model</div>
			<div class="row" v-for="(model, modelidx) in models">
				<div class="floatRight">
					<div v-show="!model.confirmDelete" class="icon action button" v-on:click="deleteModel(model)">❌</div>
					<div v-show="model.confirmDelete">Delete?
						<div class="icon action button" v-on:click="deleteModelConfirm(modelidx)">Yes</div>
						<div class="icon button" v-on:click="model.confirmDelete = false">No</div>
					</div>
				</div>
				<div class="button" v-on:click="editModel(modelidx)">{{model.name}}</div>
			</div>
		</div>
		<div class="page" v-show="page == 'model'" v-if="editingModel != null">
			<div class="back" v-on:click="page = 'models'"><</div>
			<h1>Model: {{models[editingModel].name}}</h1>
			<div class="input">
				<label>Model name:</label>
				<input type="text" placeholder="Model1" v-model="models[editingModel].name" />
			</div>
			<h3>Columns ({{models[editingModel].columns.length}})</h3>
			<div class="row" v-for="(column, colidx) in models[editingModel].columns">
				<div v-show="!column.editing">
					<div class="floatRight">
						<div class="icon action button" v-on:click="removeColumn(colidx)">❌</div>
						<div class="icon action button" v-on:click="editColumn(column)">✏️</div>
					</div>
					<div class="label">
						{{column.name}} ({{column.category}})
					</div>
				</div>
				<div class="segment" v-show="column.editing">
					<div class="input">
						<label>Column name:</label>
						<input type="text" placeholder="Column1" v-model="column.name" />
					</div>
					<h4>Column category:</h4>
					<div class="categories">
						<div v-for="category in categories" class="button category" v-bind:class="{'selected': column.category == category.name}"v-on:click="column.category = category.name">
							{{category.name}}
						</div>
					</div>
					<div class="button" v-on:click="column.editing = false">Save column</div>
				</div>
			</div>
			<div class="button" v-on:click="addColumn">Add column</div>
		</div>
		<div class="page" v-show="page == 'newModel'">
			<div class="back" v-on:click="page = 'models'"><</div>
			<h1>New Data model</h1>
			<div class="input">
				<label>Model name:</label>
				<input type="text" placeholder="Data1" v-on:keyup.enter="saveNewModel" v-model="newModelName" />
			</div>
			<div class="action button" v-on:click="saveNewModel">Save Data model</div>
		</div>
	</div>
	<script type="text/javascript" src="./js/fieldDataCollector.js"></script>
</body>
</html>